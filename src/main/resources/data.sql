USE greenroutine;
SET FOREIGN_KEY_CHECKS=0;

-- 초기화
-- 월별/일별 사용량
DELETE FROM monthly_charge WHERE user_id=1 AND ym IN ('2025-07','2025-08');

-- 팁 룰/알림
DELETE FROM tip_rule;
DELETE FROM alert WHERE created_at BETWEEN '2025-07-01 00:00:00' AND '2025-08-31 23:59:59';


DELETE FROM usage_log WHERE user_id=1 AND DATE(ts) IN ('2025-08-19');

-- 월간 사용량 (kWh / m³)
-- 7월: 전기 많이 (여름 피크), 가스 거의 0
INSERT INTO monthly_charge (user_id, ym, day_value, elec, gas) VALUES
(1,'2025-07', 1, 12,0),(1,'2025-07', 2, 11,0),(1,'2025-07', 3, 15,0),
(1,'2025-07', 4, 14,0),(1,'2025-07', 5, 13,0),(1,'2025-07', 6, 12,0),
(1,'2025-07', 7, 13,0),(1,'2025-07', 8, 12,0),(1,'2025-07', 9, 14,0),
(1,'2025-07',10, 13,0),(1,'2025-07',11, 12,0),(1,'2025-07',12, 15,0),
(1,'2025-07',13, 14,0),(1,'2025-07',14, 13,0),(1,'2025-07',15, 12,0),
(1,'2025-07',16, 13,0),(1,'2025-07',17, 14,0),(1,'2025-07',18, 15,0),
(1,'2025-07',19, 12,0),(1,'2025-07',20, 13,0),(1,'2025-07',21, 14,0),
(1,'2025-07',22, 13,0),(1,'2025-07',23, 12,0),(1,'2025-07',24, 15,0),
(1,'2025-07',25, 14,0),(1,'2025-07',26, 13,0),(1,'2025-07',27, 12,0),
(1,'2025-07',28, 13,0),(1,'2025-07',29, 14,0),(1,'2025-07',30, 12,0),
(1,'2025-07',31, 13,0);

-- 8월(1~25일): 7월 대비 15~20% 절약
INSERT INTO monthly_charge (user_id, ym, day_value, elec, gas) VALUES
(1,'2025-08', 1, 10,0),(1,'2025-08', 2,  9,0),(1,'2025-08', 3, 11,0),
(1,'2025-08', 4, 10,0),(1,'2025-08', 5,  9,0),(1,'2025-08', 6, 10,0),
(1,'2025-08', 7, 11,0),(1,'2025-08', 8, 10,0),(1,'2025-08', 9,  9,0),
(1,'2025-08',10, 10,0),(1,'2025-08',11, 11,0),(1,'2025-08',12,  9,0),
(1,'2025-08',13, 10,0),(1,'2025-08',14,  9,0),(1,'2025-08',15, 10,0),
(1,'2025-08',16, 11,0),(1,'2025-08',17, 10,0),(1,'2025-08',18,  9,0),
(1,'2025-08',19, 10,0),(1,'2025-08',20, 11,0),(1,'2025-08',21, 10,0),
(1,'2025-08',22,  9,0),(1,'2025-08',23, 10,0),(1,'2025-08',24, 11,0),
(1,'2025-08',25, 10,0);

--  알림(데모)
INSERT INTO alert (user_id, message, created_at, is_read, category, level, title_exp, yes_read) VALUES
(1,'2025-07-03 전기요금 급증(데모)','2025-07-03 09:00:00',0,'전기','경고','7월 3일 전력 급증',b'0'),
(1,'2025-08-01 전기요금 급증(데모)','2025-08-01 09:00:00',0,'전기','경고','8월 1일 전력 급증',b'0');

--  팁 룰
-- 전기(ELEC)
INSERT INTO tip_rule(housing_type, has_double_door, window_type, utility, priority, message) VALUES
('원룸', 0, '단창', 'ELEC', 0, '단창이면 낮 시간대 일사차단이 핵심! 커튼/블라인드로 햇빛을 먼저 막아주세요 🌞✋'),
('원룸', 0, NULL , 'ELEC', 1, '현관 쪽 냉기 유입 컷! 바람막이 커튼/도어실 패드가 효과적이에요 🛡️'),
(NULL  , NULL, '단창', 'ELEC', 2, '단열 뽁뽁이/필름만으로도 에어컨 효율이 확 올라갑니다 ❄️'),
(NULL  , NULL, NULL , 'ELEC', 3, '에어컨은 26~27℃, 선풍기 병행으로 체감온도만 내려도 절약 💨');

-- 가스(GAS)
INSERT INTO tip_rule(housing_type, has_double_door, window_type, utility, priority, message) VALUES
('원룸', NULL, NULL , 'GAS', 0, '보일러는 외출모드/예약가동으로 불필요한 연소 시간을 줄여요 ⏱️'),
(NULL  , NULL, '단창', 'GAS', 1, '창틀 틈 실리콘/패킹 보수로 보일러 열손실 최소화 🔧'),
(NULL  , NULL, NULL , 'GAS', 2, '온수는 “가열 후 끄기” 루틴! 샤워 10분 이내로 줄이면 절감 효과 ↑ 🚿');

-- ========== 하루 라인차트(usage_log) ==========
-- 시연 날짜: 2025-08-19
-- 시간당 1(합산용). 30초 간격
INSERT INTO usage_log (user_id, ts, elec, gas) VALUES
-- 00~05시: 저부하
(1,'2025-08-19 00:00:00', 1,0),
(1,'2025-08-19 01:00:00', 1,0),
(1,'2025-08-19 02:00:00', 0,0),
(1,'2025-08-19 03:00:00', 0,0),
(1,'2025-08-19 04:00:00', 0,0),
(1,'2025-08-19 05:00:00', 1,0),

-- 06~09시: 출근/샤워 피크
(1,'2025-08-19 06:00:00', 1,2),
(1,'2025-08-19 07:00:00', 2,2),
(1,'2025-08-19 08:00:00', 2,1),
(1,'2025-08-19 09:00:00', 2,1),

-- 10~16시: 주간 전기↑
(1,'2025-08-19 10:00:00', 3,0),
(1,'2025-08-19 11:00:00', 4,0),
(1,'2025-08-19 12:00:00', 4,0),
(1,'2025-08-19 13:00:00', 4,0),
(1,'2025-08-19 14:00:00', 4,0),
(1,'2025-08-19 15:00:00', 4,0),
(1,'2025-08-19 16:00:00', 3,0),

-- 17~21시: 저녁 피크
(1,'2025-08-19 17:00:00', 3,1),
(1,'2025-08-19 18:00:00', 4,1),
(1,'2025-08-19 19:00:00', 4,2),
(1,'2025-08-19 20:00:00', 3,2),
(1,'2025-08-19 21:00:00', 3,1),

-- 22~23시: 감소
(1,'2025-08-19 22:00:00', 2,0),
(1,'2025-08-19 23:00:00', 1,0);

SET FOREIGN_KEY_CHECKS=1;
